(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-268fa6e8"],{"08f5":function(e,t,a){"use strict";a("a7e0")},a062:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userList"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"超级管理员"===this.$store.getters.role,expression:"this.$store.getters.role === '超级管理员'"}]},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini",plain:""},on:{click:e.addUserFn}},[e._v("添加账号")])],1),a("el-table",{attrs:{data:e.userListData}},[a("el-table-column",{attrs:{fixed:"",prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"age",label:"年龄"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"mobile_phone",label:"手机"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色"}}),a("el-table-column",{attrs:{prop:"status",label:"状态","filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"启用"===t.row.status?"primary":"danger","disable-transitions":""}},[e._v(e._s(t.row.status)+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:"超级管理员"==t.row.roleName},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",disabled:"超级管理员"==t.row.roleName},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.currentChange,"prev-click":e.currentChange,"next-click":e.currentChange}}),e.dialogVisible?a("UserInfo",{attrs:{title:e.title,"dialog-visible":e.dialogVisible,"user-id":e.userId},on:{successCallback:e.successCallback}}):e._e()],1)},r=[],n=a("9b4d"),i=a("c1fe"),o={name:"UserList",components:{UserInfo:n["a"]},data:function(){return{total:0,currentPage:1,userListData:[],dialogVisible:!1,title:"",userId:""}},mounted:function(){console.log(n["a"]),this.getList({currentPage:1,pageSize:10})},methods:{addUserFn:function(){this.dialogVisible=!0,this.title="添加账号",this.userId=""},handleEdit:function(e,t){"超级管理员"===this.$store.getters.role||this.$store.getters.uid===t.id?(this.dialogVisible=!0,this.title="编辑信息",this.userId=t.id):this.$message({message:"您无权限编辑其他用户!",type:"error"})},successCallback:function(){this.dialogVisible=!1,this.getList({currentPage:this.currentPage,pageSize:10})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"超级管理员"===a.$store.getters.role?Object(i["a"])({id:t.id}).then((function(e){e&&(a.$message({message:e.message,type:"success"}),a.getList({currentPage:a.currentPage,pageSize:10}))})).catch((function(e){a.$throw(e),a.$message({message:e.message,type:"error"})})):a.$message({message:"您无权限删除用户!",type:"error"})})).catch((function(){a.$message({type:"info",message:"已取消操作!"})}))},currentChange:function(e){this.currentPage=e,this.getList({currentPage:e,pageSize:10})},getList:function(e){var t=this;Object(i["g"])(e).then((function(e){for(var a=0;a<e.data.rows.length;a++)e.data.rows[a].created_at=t.$yian.utils.getDateDiff(e.data.rows[a].created_at),e.data.rows[a].username=e.data.rows[a].username.substring(0,3)+"***",e.data.rows[a].mobile_phone=e.data.rows[a].mobile_phone.substring(0,5)+"*****","1"===e.data.rows[a].status?e.data.rows[a].status="启用":e.data.rows[a].status="禁用";t.total=e.data.count,t.userListData=e.data.rows})).catch((function(e){t.$throw(e)}))}}},l=o,c=(a("08f5"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"132b8c36",null);t["default"]=u.exports},a7e0:function(e,t,a){}}]);